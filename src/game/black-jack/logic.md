# Логика игры Black Jack

## Общие правила

Black Jack (Блэкджек) — карточная игра, цель которой набрать сумму очков, максимально близкую к 21, но не превышающую её.

## Подсчет очков

### Значения карт:
- **Карты 2-10**: значение равно номиналу карты (2 = 2 очка, 10 = 10 очков)
- **Валет (J), Дама (Q), Король (K)**: 10 очков
- **Туз (A)**: 11 очков или 1 очко (автоматически выбирается оптимальное значение)

### Логика подсчета туза:
1. Изначально туз считается как 11 очков
2. Если сумма очков превышает 21 и в руке есть тузы, каждый туз уменьшается на 10 очков (с 11 до 1)
3. Процесс повторяется до тех пор, пока сумма не станет ≤ 21 или тузы не закончатся

**Примеры:**
- A + 5 = 16 (туз как 11)
- A + 10 + 5 = 16 (туз как 1, иначе было бы 26)
- A + A + 9 = 21 (первый туз как 11, второй как 1, иначе было бы 31)

## Начало игры

1. Создается колода из 52 карт (4 масти × 13 рангов)
2. Колода перемешивается
3. Игроку и дилеру раздается по 2 карты
4. Первая карта дилера скрыта (показывается как `**`)
5. Остальные карты видны

## Проверка блэкджека при старте

**Блэкджек** — это комбинация из двух карт, дающая ровно 21 очко (туз + карта со значением 10).

### Логика проверки:
- Если у игрока блэкджек, а у дилера нет → игрок выигрывает
- Если у дилера блэкджек, а у игрока нет → дилер выигрывает
- Если у обоих блэкджек → ничья
- Если ни у кого нет блэкджека → игра продолжается

## Ход игрока

Игрок может выполнить одно из действий:

### Hit (Взять карту)
- Игрок получает одну дополнительную карту
- Если сумма очков превышает 21 → **перебор (bust)**, игрок проигрывает
- Если сумма очков равна 21 → автоматически переходит ход к дилеру (stand)

### Stand (Остановиться)
- Игрок завершает свой ход
- Ход переходит к дилеру
- Все карты дилера становятся видимыми

## Ход дилера

Дилер играет по фиксированным правилам:

1. Все карты дилера становятся видимыми
2. Дилер **обязан** брать карты, пока сумма очков < 17
3. Если сумма очков ≥ 17, дилер останавливается
4. Если сумма очков > 21 → **перебор (bust)**, дилер проигрывает

**Важно:** Дилер не принимает решений, он следует строгим правилам.

## Определение победителя

Победитель определяется после завершения хода дилера:

1. **Перебор игрока** → дилер выигрывает
2. **Перебор дилера** → игрок выигрывает
3. **Сравнение очков** (если никто не перебрал):
   - Игрок > Дилер → игрок выигрывает
   - Дилер > Игрок → дилер выигрывает
   - Игрок = Дилер → ничья

## Состояния игры

Игра может находиться в одном из следующих состояний:

- `playing` — игра в процессе, ход игрока
- `playerWon` — игрок выиграл
- `dealerWon` — дилер выиграл
- `tie` — ничья
- `playerBust` — игрок перебрал (дилер выигрывает)
- `dealerBust` — дилер перебрал (игрок выигрывает)
